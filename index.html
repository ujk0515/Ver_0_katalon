<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>QA í†µí•© ìœ í‹¸ë¦¬í‹° (Unified Mapping System)</title>
  
  <!-- External CSS -->
  <link rel="stylesheet" href="assets/css/styles.css">
  
  <!-- External Libraries -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
  
  <!-- External Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.0/jszip.min.js"></script>
</head>
<body>
  <header>
    <button class="tab-button active" data-tab="csv">ğŸ“Š CSV íŒŒì‹±</button>
    <button class="tab-button" data-tab="groovy">âš™ï¸ Groovy ë³€í™˜</button>
    <button class="tab-button" data-tab="report">ğŸ“ˆ ê²°ê³¼ ë¦¬í¬íŠ¸</button>
    <button class="tab-button" data-tab="mapping">ğŸ”„ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ë§¤í•‘</button>
    <button class="tab-button" data-tab="tcmerger">ğŸ“¦ TC ë³‘í•©/ë¶„ë¦¬</button>
  </header>

  <main>
    <!-- CSV íŒŒì‹± íƒ­ -->
    <div id="csv" class="tab-content active">
      <div class="container">
        <div class="csv-header">
          <h2>ğŸ”ª WebUI.comment ê¸°ë°˜ ë©”íƒ€ë°ì´í„° íŒŒì„œ</h2>
          <p>CSV íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì—¬ WebUI.comment ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ íŒŒì‹±í•˜ê³  ë¶„ì„í•©ë‹ˆë‹¤</p>
        </div>
        
        <div class="file-upload-section">
          <div class="file-input-wrapper">
            <input type="file" id="csvFile" accept=".csv">
            <label for="csvFile" class="file-input-label">
              ğŸ“ CSV íŒŒì¼ ì„ íƒ
            </label>
          </div>
          <p style="color: #6b7280; margin: 15px 0 0 0;">CSV íŒŒì¼ì„ ì„ íƒí•˜ë©´ ìë™ìœ¼ë¡œ íŒŒì‹±ì´ ì‹œì‘ë©ë‹ˆë‹¤</p>
        </div>
        
        <div class="action-buttons">
          <button id="downloadBtn" class="action-btn download-btn">â¬‡ï¸ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ</button>
          <button id="exampleDownloadBtn" class="action-btn example-btn">ğŸ“¥ ì˜ˆì‹œíŒŒì¼ ë‹¤ìš´ë¡œë“œ</button>
        </div>
        
        <div id="error" class="error" style="display: none;"></div>
        <table id="resultTable" class="display" style="display:none;"></table>
      </div>
    </div>
    
    <!-- Groovy ë³€í™˜ê¸° íƒ­ -->
    <div id="groovy" class="tab-content">
      <div class="container">
        <div class="groovy-header">
          <h2>ğŸ“„ Excel â” Katalon Test Case ë³€í™˜ê¸°</h2>
          <p>Excel íŒŒì¼ì„ Katalon í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤(.tc) ë° Groovy ìŠ¤í¬ë¦½íŠ¸ë¡œ ë³€í™˜í•©ë‹ˆë‹¤</p>
        </div>
        
        <div class="conversion-section">
          <div class="file-input-wrapper">
            <input type="file" id="excelFile" accept=".xlsx">
            <label for="excelFile" class="file-input-label">
              ğŸ“Š Excel íŒŒì¼ ì„ íƒ
            </label>
          </div>
          <p style="color: #6b7280; margin: 15px 0 0 0; text-align: center;">Excel í˜•ì‹ì˜ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì—…ë¡œë“œí•˜ì„¸ìš”</p>
          
          <div class="zip-buttons">
            <button onclick="generateAllZip('tc')" class="zip-btn">ğŸ“¦ ì „ì²´ .tc ZIP ë‹¤ìš´ë¡œë“œ</button>
            <button onclick="generateAllZip('groovy')" class="zip-btn">ğŸ“¦ ì „ì²´ .groovy ZIP ë‹¤ìš´ë¡œë“œ</button>
          </div>
        </div>
        
        <div class="preview-section">
          <div id="preview">
            <div style="text-align: center; color: #6b7280; padding: 50px 0;">
              <h3>ğŸ”„ ë³€í™˜ ë¯¸ë¦¬ë³´ê¸°</h3>
              <p>Excel íŒŒì¼ì„ ì„ íƒí•˜ë©´ ë³€í™˜ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- ê²°ê³¼ ë¦¬í¬íŠ¸ íƒ­ -->
    <div id="report" class="tab-content">
      <div class="container">
        <div class="report-header">
          <h2>ğŸ§¾ HTML ê²°ê³¼ê°’ Report ë·°ì–´</h2>
          <p>HTML í…ŒìŠ¤íŠ¸ ê²°ê³¼ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì—¬ ì‹œê°ì ìœ¼ë¡œ ë¶„ì„í•©ë‹ˆë‹¤</p>
        </div>
        
        <div class="file-upload-section" style="margin-bottom: 30px;">
          <div class="file-input-wrapper">
            <input type="file" id="reportFileInput" accept=".html">
            <label for="reportFileInput" class="file-input-label">
              ğŸ“„ HTML ê²°ê³¼ íŒŒì¼ ì„ íƒ
            </label>
          </div>
          <p style="color: #6b7280; margin: 15px 0 0 0;">í…ŒìŠ¤íŠ¸ ê²°ê³¼ HTML íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”</p>
        </div>
        
        <div class="report-viewer">
          <iframe id="reportPreview" class="report-preview"></iframe>
          <div id="reportResult" class="report-result">
            <h2>ğŸ“‹ íŒŒì‹±ëœ ë°ì´í„°ê°€ ì´ ì˜ì—­ì— í‘œì‹œë©ë‹ˆë‹¤</h2>
            <p style="text-align: center; color: #9ca3af;">HTML íŒŒì¼ì„ ì—…ë¡œë“œí•˜ë©´ ë¶„ì„ ê²°ê³¼ì™€ ì°¨íŠ¸ê°€ ì—¬ê¸°ì— ë‚˜íƒ€ë‚©ë‹ˆë‹¤</p>
          </div>
        </div>
      </div>
    </div>
    
    <!-- í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ë§¤í•‘ íƒ­ (í†µí•© ì‹œìŠ¤í…œ ì ìš©) -->
    <div id="mapping" class="tab-content">
      <div class="mapping-container">
        <div class="panel left-panel">
          <div class="panel-header">
            <span>ğŸ“ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ì…ë ¥</span>
            <button class="reset-btn" onclick="resetInput()">ğŸ”„ ì´ˆê¸°í™”</button>
          </div>
          <div class="panel-content">
            <div class="input-section">
              <label class="input-label">í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ì „ì²´ ë‚´ìš©</label>
              <textarea id="testcaseInput" class="input-box" placeholder="í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ì „ì²´ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...

ì˜ˆì‹œ:
Summary: ë¡œê·¸ì¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
Precondition: 
0. ë¸Œë¼ìš°ì €ë¥¼ ì—´ê³  ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
1. ìœ íš¨í•œ ì‚¬ìš©ì ê³„ì •ì´ ì¡´ì¬í•¨
2. ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ì •ìƒì„
Steps:
1. ì•„ì´ë”” ì…ë ¥ í•„ë“œì— í…ŒìŠ¤íŠ¸ ê³„ì • ì…ë ¥
2. ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ í•„ë“œì— ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
3. ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
Expected Result: ë¡œê·¸ì¸ ì„±ê³µ í›„ ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™"></textarea>
            </div>
            <button class="extract-btn" onclick="extractTestcaseData()">ğŸ“Š ë°ì´í„° ì¶”ì¶œ</button>
          </div>
        </div>
        <div class="panel center-panel">
          <div class="panel-header">
            <span>ğŸ” íŒŒì‹± ê²°ê³¼</span>
            <button class="reset-btn" onclick="resetParsing()">ğŸ”„ ì´ˆê¸°í™”</button>
          </div>
          <div class="panel-content">
            <div class="parsed-section">
              <div class="section-header">ğŸ“‹ Summary</div>
              <div class="section-content" id="summaryResult">
                <span class="placeholder-text">ì¶”ì¶œëœ Summaryê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</span>
              </div>
            </div>
            <div class="parsed-section">
              <div class="section-header">âš™ï¸ Precondition</div>
              <div class="section-content" id="preconditionResult">
                <span class="placeholder-text">ì¶”ì¶œëœ Preconditionì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</span>
              </div>
            </div>
            <!-- Steps ì„¹ì…˜ -->
            <div class="parsed-section steps-section">
              <div class="section-header"> Steps</div>
              <div class="section-content" id="stepsResult">
                <span class="placeholder-text">ì¶”ì¶œëœ Stepsê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</span>
              </div>
            </div>
            <div class="parsed-section">
              <div class="section-header">âœ… Expected Result</div>
              <div class="section-content" id="expectedResult">
                <span class="placeholder-text">ì¶”ì¶œëœ Expected Resultê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</span>
              </div>
            </div>
            <button class="convert-btn" id="convertBtn" onclick="generateMappingScript()" disabled>âš¡ í†µí•© ì‹œìŠ¤í…œ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±</button>
          </div>
        </div>
        <div class="panel right-panel">
          <div class="panel-header">
            <span>ğŸ› ï¸ í†µí•© ë§¤í•‘ ì‹œìŠ¤í…œ ìŠ¤í¬ë¦½íŠ¸</span>
            <button class="reset-btn" onclick="resetScript()">ğŸ”„ ì´ˆê¸°í™”</button>
          </div>
          <div class="panel-content">
            <div class="script-section">
              <div class="script-header">
                <div class="mapping-indicator no-mapping" id="mappingIndicator"></div>
                ğŸ“‹ í†µí•© ë§¤í•‘ ìŠ¤í¬ë¦½íŠ¸ (90%+ ë§¤í•‘ë¥ )
                <button class="copy-btn" onclick="copyScript()">ğŸ“‹ ë³µì‚¬</button>
              </div>
              <div class="script-content" id="scriptResult">
                <span class="placeholder-text">// í†µí•© ë§¤í•‘ ì‹œìŠ¤í…œ ìŠ¤í¬ë¦½íŠ¸ê°€ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤
// Observer + Complete + Combination ì—”ì§„ í†µí•© ë§¤í•‘
// 
// === Precondition Scripts ===
// Precondition ë§¤í•‘ ìŠ¤í¬ë¦½íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤
//
// === Summary Scripts ===  
// Summary ë§¤í•‘ ìŠ¤í¬ë¦½íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤
//
// === Steps Scripts ===
// Steps ë§¤í•‘ ìŠ¤í¬ë¦½íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤
//
// === Expected Result Scripts ===
// Expected Result ë§¤í•‘ ìŠ¤í¬ë¦½íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- TC ë³‘í•©/ë¶„ë¦¬ íƒ­ -->
    <div id="tcmerger" class="tab-content">
      <div class="container">
        <div class="tcmerger-header">
          <h2>ğŸ“¦ Test Case Excel/CSV ë³‘í•© / ë¶„ë¦¬ ë„êµ¬</h2>
          <p>CSV/Excel íŒŒì¼ì˜ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ë‹¨ê³„ë¥¼ ë³‘í•©í•˜ê±°ë‚˜ ë¶„ë¦¬í•©ë‹ˆë‹¤</p>
        </div>

        <!-- íƒ­ ì„ íƒ ì˜ì—­ -->
        <div style="display: flex; justify-content: center; margin-bottom: 30px; gap: 10px;">
          <button class="tcmerger-tab-btn active" data-tcmerger-tab="merge" onclick="switchTCMergerTab('merge')">ğŸ“¦ ë³‘í•© ê¸°ëŠ¥</button>
          <button class="tcmerger-tab-btn" data-tcmerger-tab="split" onclick="switchTCMergerTab('split')">ğŸ” ë¶„ë¦¬ ê¸°ëŠ¥</button>
        </div>

        <!-- ë³‘í•© íƒ­ -->
        <div id="mergeTab" class="tcmerger-tab-content active">
          <div class="tab-description">
            <h3>ğŸ“¦ ë³‘í•© ê¸°ëŠ¥</h3>
            <p><strong>CSV íŒŒì¼</strong>ì˜ ê°œë³„ Step ì»¬ëŸ¼ë“¤ì„ <strong>Combined Steps</strong>ë¡œ ë³‘í•©í•©ë‹ˆë‹¤.</p>
            <p>â€¢ ì…ë ¥: Steps (Step), Step 1, Step 2, Step 3, Step 4, Step 5, Step 6</p>
            <p>â€¢ ì¶œë ¥: Combined Steps (ìë™ ë²ˆí˜¸ ë§¤ê¸°ê¸° í¬í•¨)</p>
          </div>
          
          <div class="file-upload-section">
            <h4>ğŸ“ CSV íŒŒì¼ ì—…ë¡œë“œ</h4>
            <div class="file-input-wrapper">
              <input type="file" id="mergeFileInput" accept=".csv">
              <label for="mergeFileInput" class="file-input-label">
                ğŸ“ CSV íŒŒì¼ ì„ íƒ
              </label>
            </div>
            <p style="color: #6c757d; margin-top: 10px;">CSV íŒŒì¼ë§Œ ì§€ì›ë©ë‹ˆë‹¤</p>
          </div>
          
          <div id="mergeFileInfo" class="file-info"></div>
          <div id="mergeCleaningInfo" class="file-info cleaning-info">
            ğŸ§¹ HTML íƒœê·¸ ì •ë¦¬ ì™„ë£Œ! íƒœê·¸ë“¤ì´ ì ì ˆíˆ ë³€í™˜/ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.
          </div>
          
          <div class="action-buttons">
            <button class="action-btn download-btn" onclick="executeMerge()">ğŸ“¦ ë³‘í•© ì‹¤í–‰</button>
            <button class="action-btn example-btn" onclick="downloadMergeResult()">â¬‡ ë³‘í•© ê²°ê³¼ ë‹¤ìš´ë¡œë“œ</button>
          </div>
          
          <div id="mergeResult">
            <div class="empty-state">
              <div class="icon">ğŸ“‹</div>
              <p>CSV íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  ë³‘í•©ì„ ì‹¤í–‰í•´ì£¼ì„¸ìš”</p>
            </div>
          </div>
        </div>

        <!-- ë¶„ë¦¬ íƒ­ -->
        <div id="splitTab" class="tcmerger-tab-content">
          <div class="tab-description">
            <h3>ğŸ” ë¶„ë¦¬ ê¸°ëŠ¥</h3>
            <p><strong>Excel íŒŒì¼</strong>ì˜ Stepsë¥¼ ê°œë³„ Step ì»¬ëŸ¼ë“¤ë¡œ ë¶„ë¦¬í•©ë‹ˆë‹¤.</p>
            <p>â€¢ ì…ë ¥: Combined Steps</p>
            <p>â€¢ ì¶œë ¥: Steps (Step), Step 1, Step 2, Step 3, Step 4, Step 5, Step 6</p>
          </div>
          
          <div class="file-upload-section">
            <h4>ğŸ“ Excel íŒŒì¼ ì—…ë¡œë“œ</h4>
            <div class="file-input-wrapper">
              <input type="file" id="splitFileInput" accept=".xlsx">
              <label for="splitFileInput" class="file-input-label">
                ğŸ“Š Excel íŒŒì¼ ì„ íƒ
              </label>
            </div>
            <p style="color: #6c757d; margin-top: 10px;">Excel íŒŒì¼(.xlsx)ë§Œ ì§€ì›ë©ë‹ˆë‹¤</p>
          </div>
          
          <div id="splitFileInfo" class="file-info"></div>
          <div id="splitCleaningInfo" class="file-info cleaning-info">
            ğŸ§¹ HTML íƒœê·¸ ì •ë¦¬ ì™„ë£Œ! íƒœê·¸ë“¤ì´ ì ì ˆíˆ ë³€í™˜/ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.
          </div>
          
          <div class="action-buttons">
            <button class="action-btn download-btn" onclick="executeSplit()">ğŸ” ë¶„ë¦¬ ì‹¤í–‰</button>
            <button class="action-btn example-btn" onclick="downloadSplitResult()">â¬‡ ë¶„ë¦¬ ê²°ê³¼ ë‹¤ìš´ë¡œë“œ</button>
          </div>
          
          <div id="splitResult">
            <div class="empty-state">
              <div class="icon">ğŸ”</div>
              <p>Excel íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  ë¶„ë¦¬ë¥¼ ì‹¤í–‰í•´ì£¼ì„¸ìš”</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- ğŸ¯ ìˆ˜ì •ëœ Library Scripts ë¡œë“œ ìˆœì„œ (í†µí•© ì‹œìŠ¤í…œ ì ìš©) -->
  <!-- 1. ê¸°ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ -->
  <script src="libs/common_utils_zip.js"></script>
  <script src="libs/csv_parser_zip.js"></script>
  <script src="libs/groovy_converter_zip.js"></script>
  <script src="libs/report_viewer_zip.js"></script>
  <script src="libs/script.js"></script>

  <!-- 2. í†µí•© ë§¤í•‘ ì‹œìŠ¤í…œ ëª¨ë“ˆë“¤ (ì˜ì¡´ì„± ìˆœì„œëŒ€ë¡œ) -->
  <script src="libs/testcase_mapping/katalon_mapping_complete.js"></script>
  <script src="libs/testcase_mapping/katalon_mapping_observer.js"></script>
  <script src="libs/testcase_mapping/korean_combination_keywords.js"></script>
  <script src="libs/testcase_mapping/korean_grammar_analyzer.js"></script>
  <script src="libs/testcase_mapping/korean_combination_engine.js"></script>
  <script src="libs/testcase_mapping/unified_mapping_system.js"></script>

  <!-- 3. í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ì²˜ë¦¬ ëª¨ë“ˆë“¤ (í†µí•© ì‹œìŠ¤í…œ ì ìš©) -->
  <script src="libs/testcase_mapping/testcase_parser.js"></script>
  <script src="libs/testcase_mapping/katalon_mapper.js"></script>
  <script src="libs/testcase_mapping/testcase_ui_controller.js"></script>
  <script src="libs/testcase_mapping/testcase_mapper_main.js"></script>

  <!-- 4. ì• í”Œë¦¬ì¼€ì´ì…˜ ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ë“¤ -->
  <script src="assets/js/ui-utils.js"></script>
  <script src="assets/js/file-handlers.js"></script>
  <script src="assets/js/main.js"></script>

  <!-- í†µí•© ì‹œìŠ¤í…œ ì´ˆê¸°í™” ë° ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    // í†µí•© ì‹œìŠ¤í…œ ìƒíƒœ ì²´í¬
    function checkUnifiedSystemStatus() {
      const requirements = [
        typeof unifiedMappingSystem !== 'undefined',
        typeof koreanCombinationEngine !== 'undefined',
        typeof KATALON_MAPPING_COMPLETE !== 'undefined',
        typeof KATALON_MAPPING_OBSERVER !== 'undefined'
      ];
      
      const available = requirements.filter(Boolean).length;
      const total = requirements.length;
      
      console.log(`ğŸ¯ í†µí•© ì‹œìŠ¤í…œ ìƒíƒœ: ${available}/${total} (${Math.round(available/total*100)}%)`);
      
      if (available === total) {
        console.log('ğŸ‰ í†µí•© ë§¤í•‘ ì‹œìŠ¤í…œ ì™„ì „ ë¡œë“œ!');
        
        // ì‹œìŠ¤í…œ ì¤€ë¹„ ì•Œë¦¼ í‘œì‹œ
        const notification = document.createElement('div');
        notification.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          background: linear-gradient(135deg, #10b981 0%, #059669 100%);
          color: white;
          padding: 15px 20px;
          border-radius: 8px;
          z-index: 1000;
          font-weight: 600;
          box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
          animation: slideIn 0.3s ease;
        `;
        notification.innerHTML = `
          ğŸš€ í†µí•© ë§¤í•‘ ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ!<br>
          <small style="opacity: 0.9;">90%+ ë§¤í•‘ë¥  ë‹¬ì„± ê°€ëŠ¥</small>
        `;
        
        // ìŠ¬ë¼ì´ë“œ ì¸ ì• ë‹ˆë©”ì´ì…˜
        const style = document.createElement('style');
        style.textContent = `
          @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
        `;
        document.head.appendChild(style);
        
        document.body.appendChild(notification);
        
        // 3ì´ˆ í›„ ìë™ ì œê±°
        setTimeout(() => {
          notification.style.animation = 'slideIn 0.3s ease reverse';
          setTimeout(() => {
            if (notification.parentNode) {
              notification.parentNode.removeChild(notification);
            }
          }, 300);
        }, 3000);
        
      } else {
        console.warn(`âš ï¸ ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ ëˆ„ë½: ${total - available}ê°œ`);
        
        // ëˆ„ë½ ê²½ê³  í‘œì‹œ
        const warning = document.createElement('div');
        warning.style.cssText = `
          position: fixed;
          top: 20px;
          right: 20px;
          background: #fef3c7;
          border: 1px solid #fcd34d;
          color: #92400e;
          padding: 12px 16px;
          border-radius: 6px;
          z-index: 1000;
          max-width: 300px;
          font-size: 14px;
        `;
        warning.innerHTML = `
          âš ï¸ í†µí•© ì‹œìŠ¤í…œ ì¼ë¶€ ì œí•œ<br>
          <small>ê¸°ë³¸ ë§¤í•‘ ê¸°ëŠ¥ì€ ì •ìƒ ë™ì‘í•©ë‹ˆë‹¤</small>
        `;
        document.body.appendChild(warning);
        
        setTimeout(() => {
          if (warning.parentNode) {
            warning.parentNode.removeChild(warning);
          }
        }, 5000);
      }
      
      return available >= 3; // ìµœì†Œ 3ê°œ ì´ìƒ ë¡œë“œë˜ë©´ ë™ì‘ ê°€ëŠ¥
    }

    // íƒ­ ì „í™˜ ê¸°ëŠ¥
    document.querySelectorAll('.tab-button').forEach(button => {
      button.addEventListener('click', () => {
        document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
        
        button.classList.add('active');
        const tabId = button.getAttribute('data-tab');
        document.getElementById(tabId).classList.add('active');
      });
    });

    // íŒŒì¼ ì„ íƒ ì‹œ ë ˆì´ë¸” ì—…ë°ì´íŠ¸
    document.getElementById('csvFile').addEventListener('change', function() {
      const label = this.nextElementSibling;
      if (this.files.length > 0) {
        label.innerHTML = `âœ… ${this.files[0].name}`;
        label.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
      }
    });

    document.getElementById('excelFile').addEventListener('change', function() {
      const label = this.nextElementSibling;
      if (this.files.length > 0) {
        label.innerHTML = `âœ… ${this.files[0].name}`;
        label.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
      }
    });

    document.getElementById('reportFileInput').addEventListener('change', function() {
      const label = this.nextElementSibling;
      if (this.files.length > 0) {
        label.innerHTML = `âœ… ${this.files[0].name}`;
        label.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
      }
    });

    // TC Merger ë‚´ë¶€ íƒ­ ì „í™˜
    function switchTCMergerTab(tab) {
      document.querySelectorAll('.tcmerger-tab-btn').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tcmerger-tab-content').forEach(content => content.classList.remove('active'));
      
      const targetBtn = document.querySelector(`[data-tcmerger-tab="${tab}"]`);
      if (targetBtn) {
        targetBtn.classList.add('active');
      }
      
      const targetTab = document.getElementById(tab + 'Tab');
      if (targetTab) {
        targetTab.classList.add('active');
      }
    }

    // ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ í•¨ìˆ˜
    function showError(message) {
      const errorDiv = document.getElementById('error');
      if (errorDiv) {
        errorDiv.innerHTML = `
          <div style="display: flex; align-items: center;">
            <span style="margin-right: 10px;">âš ï¸</span>
            <span>${message}</span>
          </div>
        `;
        errorDiv.style.display = 'block';
        
        setTimeout(() => {
          errorDiv.style.display = 'none';
        }, 3000);
      }
    }

    // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ í•¨ìˆ˜
    function showSuccess(message) {
      const errorDiv = document.getElementById('error');
      if (errorDiv) {
        errorDiv.innerHTML = `
          <div style="display: flex; align-items: center; background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%); color: #065f46; border-left-color: #10b981;">
            <span style="margin-right: 10px;">âœ…</span>
            <span>${message}</span>
          </div>
        `;
        errorDiv.style.display = 'block';
        
        setTimeout(() => {
          errorDiv.style.display = 'none';
        }, 3000);
      }
    }

    // ë¡œë”© ìƒíƒœ í‘œì‹œ í•¨ìˆ˜
    function showLoading(buttonElement, originalText) {
      if (buttonElement) {
        buttonElement.innerHTML = `<span class="loading"></span>${originalText}`;
        buttonElement.disabled = true;
      }
    }

    function hideLoading(buttonElement, originalText) {
      if (buttonElement) {
        buttonElement.innerHTML = originalText;
        buttonElement.disabled = false;
      }
    }

    // DOM ë¡œë“œ ì™„ë£Œ í›„ í†µí•© ì‹œìŠ¤í…œ ìƒíƒœ ì²´í¬
    document.addEventListener('DOMContentLoaded', function() {
      setTimeout(() => {
        checkUnifiedSystemStatus();
      }, 500);
    });
  </script>
</body>
</html>
